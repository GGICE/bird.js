!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.bird=e():t.bird=e()}(this,function(){return function(t){function e(a){if(s[a])return s[a].exports;var r=s[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var s={};return e.m=t,e.c=s,e.d=function(t,s,a){e.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,s){"use strict";const{console:a}=window;e.a={isDo:()=>window.DEBUG,log(){this.isDo()&&a.log(arguments)},warn(){this.isDo()&&a.warn(arguments)},error(){this.isDo()&&a.error(arguments)}}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(2);class r{constructor(t){this.wrap=document.querySelector(t.el),this.wrap.innerHTML=t.template,this.customEventHost=document.createElement("div"),this.randers()}component(t,e){class s extends a.a{constructor(){super()}getOptions(){return e}}customElements.define(t,s)}setTemplate(t){this.wrap.innerHTML=t}randers(){}on(t,e){const{customEventHost:s}=this;s.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation(),e(t.detail)})}trigger(t,e){const{customEventHost:s}=this;var a=new CustomEvent(t,{detail:e});s.dispatchEvent(a)}}e.default=r},function(t,e,s){"use strict";s(0);var a=s(3),r=s(4),i=s(5);const n=new a.a;class o extends HTMLElement{constructor(){super()}static get observedAttributes(){return["b-data"]}connectedCallback(){this.init();const{created:t}=this;t&&t.apply(this)}adoptedCallback(){const{attached:t}=this;t&&t.apply(this)}disconnectedCallback(){const{removed:t}=this;t&&t.apply(this)}attributeChangedCallback(t,e,s){const{attributeChanged:a}=this;a&&a.apply(this,t,e,s),null===e&&this.initData&&JSON.stringify(this.initData[t])===s||this.reRender(t)}init(){const t=this.getOptions(),{template:e,data:s,created:a,styles:r,rendered:i}=t;s?(this.data=s,this.initData=Object.assign({},s)):this.data=null,this.initShadowEL(),this.applyAttrToData(),this.template=e||"",this.styles=r,this.rendered=i,this.created=a,this.bindAttr(),this.render()}parse(){return n.parse(this)}initShadowEL(){this.tempShadow=document.createElement("div").attachShadow({mode:"open"}),this.shadow=this.attachShadow({mode:"open"})}applyAttrToData(){const t=this.getAttribute("b-model");this.data=Object.assign({},this.data,JSON.parse(t||"{}")),this.setAttribute("b-model",i.a.getNewId())}applyDataToAttr(t){this.setAttribute("b-data",i.a.getNewId())}bindAttr(){const{data:t}=this;this.applyDataToAttr(t)}setData(t){this.data=Object.assign(this.data,t),this.applyDataToAttr(t)}render(){this.shadow.innerHTML=this.parse(),this.bindEvents(),this.rendered&&this.rendered()}reRender(){this.tempShadow.innerHTML=this.parse(),r.a.diffAsyn(this.tempShadow,this.shadow),this.rendered&&this.rendered()}bindEvents(){var t=this.shadow;this.buildChildEvents(t)}buildChildEvents(t){[].forEach.call(t.childNodes,t=>{t.attributes&&t.attributes.length>0&&[].forEach.call(t.attributes,e=>{var s,a,r=e.value.match(/function\[(\w+)\]/);r&&r[1]&&(a=this.data[r[1]],s=e.name.replace("on-","").toLowerCase(),a&&t.addEventListener(s,a.bind(this)))}),this.buildChildEvents(t)})}}e.a=o},function(module,__webpack_exports__,__webpack_require__){"use strict";class Btp{constructor(){}parse(options){const{template:template,data:data,styles:styles}=options;var html=template.replace(/\r|\f|\n/g,"").replace(/( )+/g," ");html=this.parseMap(html),html=this.parseEvent(html),html=this.parseNormal(html),html=html.replace(/b-@@##/g,"${"),html="`"+html+"`";try{html=eval(html)}catch(t){window.console.warn(t)}return styles&&(html="<style>"+styles+"</style>"+html),html}parseMap(t){return t.replace(/\w*.map.*\)/g,t=>(t=t.replace(/{/g,"b-@@##"),(t=t.replace(/"/g,"`"))+'.join("")'))}parseEvent(t){return t.replace(/on-\w*={\w*}/g,t=>" "+t.replace(/{(\w*)}/,(t,e)=>"function["+e+"]"))}parseNormal(t){return t.replace(/{/g,"${data.")}}__webpack_exports__.a=Btp},function(t,e,s){"use strict";var a=s(0);class r{static diff(t,e){if(t.innerHTML===e.innerHTML)return a.a.log("diff Same!");var s,r=this.getEls(e.childNodes),i=this.getEls(t.childNodes),n=r.length,o=i.length,l=Math.min(o,n);if(o>n)for(s=n;s<o;s++)e.appendChild(i[s]);if(o<n)for(s=n;s>o;s--)e.removeChild(r[s-1]);for(s=0;s<l;s++)i[s].outerHTML!==r[s].outerHTML&&(i[s].tagName===r[s].tagName&&this.getEls(i[s].childNodes).length>0?this.diffAsyn(i[s],r[s]):e.replaceChild(i[s],r[s]))}static diffAsyn(t,e){return new Promise(s=>{this.diff(t,e),s()})}static getEls(t){return[].filter.call(t,function(t){return 1===t.nodeType})}}e.a=r},function(t,e,s){"use strict";e.a={getNewId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var e="",s=0;s<10;s++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}}}])});