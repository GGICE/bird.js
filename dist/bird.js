!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(2),l=r(s),c=function(){function t(e){o(this,t),this.wrap=document.querySelector(e.el),this.wrap.innerHTML=e.template,this.customEventHost=document.createElement("div"),this.randers()}return u(t,[{key:"component",value:function(t,e){var n=function(t){function n(){return o(this,n),a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this))}return i(n,t),u(n,[{key:"getOptions",value:function(){return e}}]),n}(l.default);customElements.define(t,n)}},{key:"setTemplate",value:function(t){this.wrap.innerHTML=t}},{key:"randers",value:function(){}},{key:"on",value:function(t,e){var n=this.customEventHost;n.addEventListener(t,function(t){t.preventDefault(),t.stopPropagation(),e(t.detail)})}},{key:"trigger",value:function(t,e){var n=(this.customEventList,this.customEventHost),r=new CustomEvent(t,{detail:e});n.dispatchEvent(r)}}]),t}();e.default=c},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=window,r=n.console;e.default={isDo:function(){return window.DEBUG},log:function(){this.isDo()&&r.log(arguments)},warn:function(){this.isDo()&&r.warn(arguments)},error:function(){this.isDo()&&r.error(arguments)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(1),l=(r(s),n(3)),c=r(l),f=n(5),d=r(f),h=n(4),p=r(h),y=new c.default,v=function(t){function e(){return a(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this))}return o(e,t),u(e,[{key:"connectedCallback",value:function(){this.init();var t=this.created;t&&t.apply(this)}},{key:"adoptedCallback",value:function(){var t=this.attached;t&&t.apply(this)}},{key:"disconnectedCallback",value:function(){var t=this.removed;t&&t.apply(this)}},{key:"attributeChangedCallback",value:function(t,e,n){var r=this.attributeChanged;r&&r.apply(this,t,e,n),null===e&&this.initData&&JSON.stringify(this.initData[t])===n||this.reRender(t)}},{key:"init",value:function(){var t=this.getOptions(),e=t.template,n=t.data,r=t.created,a=t.styles,i=t.rendered;n?(this.data=n,this.initData=Object.assign({},n)):this.data=null,this.initShadowEL(),this.applyAttrToData(),this.template=e||"",this.styles=a,this.rendered=i,this.created=r,this.bindAttr(),this.render()}},{key:"parse",value:function(){return y.parse(this)}},{key:"initShadowEL",value:function(){this.tempShadow=document.createElement("div").attachShadow({mode:"open"}),this.shadow=this.attachShadow({mode:"open"})}},{key:"applyAttrToData",value:function(){var t=this.getAttribute("b-model");this.data=Object.assign({},this.data,JSON.parse(t||"{}")),this.setAttribute("b-model",p.default.getNewId())}},{key:"applyDataToAttr",value:function(t){this.setAttribute("b-data",p.default.getNewId())}},{key:"bindAttr",value:function(){var t=this.data;this.applyDataToAttr(t)}},{key:"setData",value:function(t){this.data=Object.assign(this.data,t),this.applyDataToAttr(t)}},{key:"render",value:function(){this.shadow.innerHTML=this.parse(),this.bindEvents(),this.rendered&&this.rendered()}},{key:"reRender",value:function(){this.tempShadow.innerHTML=this.parse(),d.default.diffAsyn(this.tempShadow,this.shadow),this.rendered&&this.rendered()}},{key:"bindEvents",value:function(){var t=this.shadow;this.buildChildEvents(t)}},{key:"buildChildEvents",value:function(t){var e=this;[].forEach.call(t.childNodes,function(t){t.attributes&&t.attributes.length>0&&[].forEach.call(t.attributes,function(n){var r,a,i=n.value.match(/function\[(\w+)\]/);i&&i[1]&&(a=e.data[i[1]],r=n.name.replace("on-","").toLowerCase(),a&&t.addEventListener(r,a.bind(e)))}),e.buildChildEvents(t)})}}],[{key:"observedAttributes",get:function(){return["b-data"]}}]),e}(HTMLElement);e.default=v},function(module,exports){"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Btp=function(){function Btp(){_classCallCheck(this,Btp)}return _createClass(Btp,[{key:"parse",value:function parse(options){var template=options.template,data=options.data,styles=options.styles,html=template.replace(/\r|\f|\n/g,"").replace(/( )+/g," ");html=this.parseMap(html),html=this.parseEvent(html),html=this.parseNormal(html),html=html.replace(/b-@@##/g,"${"),html="`"+html+"`";try{html=eval(html)}catch(t){window.console.warn(t)}return styles&&(html="<style>"+styles+"</style>"+html),html}},{key:"parseMap",value:function(t){return t.replace(/\w*.map.*\)/g,function(t){return t=t.replace(/{/g,"b-@@##"),t=t.replace(/"/g,"`"),t+'.join("")'})}},{key:"parseEvent",value:function(t){return t.replace(/on-\w*={\w*}/g,function(t){return" "+t.replace(/{(\w*)}/,function(t,e){return"function["+e+"]"})})}},{key:"parseNormal",value:function(t){return t.replace(/{/g,"${data.")}}]),Btp}();exports.default=Btp},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={getNewId:function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<10;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),u=r(o),s=function(){function t(){a(this,t)}return i(t,null,[{key:"diff",value:function(t,e){if(t.innerHTML===e.innerHTML)return u.default.log("diff Same!");var n,r=this.getEls(e.childNodes),a=this.getEls(t.childNodes),i=r.length,o=a.length,s=Math.min(o,i);if(o>i)for(n=i;n<o;n++)e.appendChild(a[n]);if(o<i)for(n=i;n>o;n--)e.removeChild(r[n-1]);for(n=0;n<s;n++)a[n].outerHTML!==r[n].outerHTML&&(a[n].tagName===r[n].tagName&&this.getEls(a[n].childNodes).length>0?this.diffAsyn(a[n],r[n]):e.replaceChild(a[n],r[n]))}},{key:"diffAsyn",value:function(t,e){var n=this;return new Promise(function(r){n.diff(t,e),r()})}},{key:"getEls",value:function(t){return[].filter.call(t,function(t){return 1===t.nodeType})}}]),t}();e.default=s}])});